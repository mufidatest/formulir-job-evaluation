<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title></title>
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="2487.4">
  <style type="text/css">
    p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica}
    p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; min-height: 14.0px}
  </style>
</head>
<body>
<p class="p1">&lt;!DOCTYPE html&gt;</p>
<p class="p1">&lt;html lang="en"&gt;</p>
<p class="p1">&lt;head&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;meta charset="UTF-8"&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;title&gt;Formulir Pembuatan Job&lt;/title&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;style&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>body { font-family: Arial, sans-serif; margin: 20px; }</p>
<p class="p1"><span class="Apple-converted-space">        </span>label { display: block; margin-bottom: 5px; font-weight: bold; }</p>
<p class="p1"><span class="Apple-converted-space">        </span>input[type="text"], select, textarea { width: 300px; padding: 8px; margin-bottom: 10px; border: 1px solid #ccc; border-radius: 4px; }</p>
<p class="p1"><span class="Apple-converted-space">        </span>button { padding: 10px 15px; background-color: #007bff; color: white; border: none; border-radius: 4px; cursor: pointer; }</p>
<p class="p1"><span class="Apple-converted-space">        </span>button:hover { background-color: #0056b3; }</p>
<p class="p1"><span class="Apple-converted-space">        </span>#loadingMessage { color: blue; display: none; margin-bottom: 10px; }</p>
<p class="p1"><span class="Apple-converted-space">        </span>#successMessage { color: green; display: none; margin-top: 15px; }</p>
<p class="p1"><span class="Apple-converted-space">        </span>#errorMessage { color: red; display: none; margin-top: 15px; }</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;/style&gt;</p>
<p class="p1">&lt;/head&gt;</p>
<p class="p1">&lt;body&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;h1&gt;Formulir Pembuatan Job&lt;/h1&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;p&gt;Pilih job dari daftar yang ada atau masukkan job baru.&lt;/p&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;div id="loadingMessage"&gt;Memuat daftar job...&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;div id="errorMessage"&gt;Gagal memuat daftar job. Silakan coba lagi nanti atau masukkan secara manual.&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;form id="jobForm"&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;label for="jobListDropdown"&gt;Pilih Job (jika ada di daftar):&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;select id="jobListDropdown" name="selectedJob"&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;option value=""&gt;-- Pilih --&lt;/option&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/select&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;label for="newJobName" style="margin-top: 15px;"&gt;Atau Masukkan Nama Job Baru (jika tidak ada di daftar):&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;input type="text" id="newJobName" name="newJob" placeholder="Nama job baru"&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;label for="notes" style="margin-top: 15px;"&gt;Catatan Tambahan (Opsional):&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;textarea id="notes" name="notes" rows="4" placeholder="Tulis catatan di sini..."&gt;&lt;/textarea&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;button type="submit"&gt;Kirim Data&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;/form&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;div id="successMessage"&gt;Data berhasil dikirim!&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;script&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>// *** PENTING: GANTI DENGAN URL WEBHOOK N8N ANDA UNTUK MENGAMBIL DATA DROPDOWN JOB ***</p>
<p class="p1"><span class="Apple-converted-space">        </span>const N8N_JOB_DROPDOWN_WEBHOOK_URL = 'https://mufidahamaliyah.app.n8n.cloud/webhook/8c60817a-743f-4c96-a50e-65a17e1c562e';</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>// *** PENTING: GANTI DENGAN URL WEBHOOK N8N ANDA UNTUK MENGIRIM DATA FORMULIR ***</p>
<p class="p1"><span class="Apple-converted-space">        </span>const N8N_SUBMIT_WEBHOOK_URL = 'https://mufidahamaliyah.app.n8n.cloud/webhook/23ac7666-2ab8-402a-80bd-ceb83c3ca681';</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>const jobListDropdown = document.getElementById('jobListDropdown');</p>
<p class="p1"><span class="Apple-converted-space">        </span>const newJobNameInput = document.getElementById('newJobName');</p>
<p class="p1"><span class="Apple-converted-space">        </span>const jobForm = document.getElementById('jobForm');</p>
<p class="p1"><span class="Apple-converted-space">        </span>const loadingMessage = document.getElementById('loadingMessage');</p>
<p class="p1"><span class="Apple-converted-space">        </span>const successMessage = document.getElementById('successMessage');</p>
<p class="p1"><span class="Apple-converted-space">        </span>const errorMessage = document.getElementById('errorMessage');</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>// Fungsi untuk mengambil data dropdown Job dari n8n</p>
<p class="p1"><span class="Apple-converted-space">        </span>async function fetchJobDropdownData() {</p>
<p class="p1"><span class="Apple-converted-space">            </span>loadingMessage.style.display = 'block';</p>
<p class="p1"><span class="Apple-converted-space">            </span>errorMessage.style.display = 'none';</p>
<p class="p1"><span class="Apple-converted-space">            </span>try {</p>
<p class="p1"><span class="Apple-converted-space">                </span>const response = await fetch(N8N_JOB_DROPDOWN_WEBHOOK_URL);</p>
<p class="p1"><span class="Apple-converted-space">                </span>if (!response.ok) {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>throw new Error(`HTTP error! status: ${response.status}`);</p>
<p class="p1"><span class="Apple-converted-space">                </span>}</p>
<p class="p1"><span class="Apple-converted-space">                </span>const data = await response.json();</p>
<p class="p2"><span class="Apple-converted-space">                </span></p>
<p class="p1"><span class="Apple-converted-space">                </span>// Bersihkan opsi lama sebelum menambahkan yang baru</p>
<p class="p1"><span class="Apple-converted-space">                </span>jobListDropdown.innerHTML = '&lt;option value=""&gt;-- Pilih --&lt;/option&gt;';</p>
<p class="p1"><span class="Apple-converted-space">                </span>data.forEach(item =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>const option = document.createElement('option');</p>
<p class="p1"><span class="Apple-converted-space">                    </span>option.value = item.value;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>option.textContent = item.label;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>jobListDropdown.appendChild(option);</p>
<p class="p1"><span class="Apple-converted-space">                </span>});</p>
<p class="p1"><span class="Apple-converted-space">                </span>loadingMessage.style.display = 'none';</p>
<p class="p1"><span class="Apple-converted-space">            </span>} catch (error) {</p>
<p class="p1"><span class="Apple-converted-space">                </span>console.error("Gagal memuat data dropdown job:", error);</p>
<p class="p1"><span class="Apple-converted-space">                </span>loadingMessage.style.display = 'none';</p>
<p class="p1"><span class="Apple-converted-space">                </span>errorMessage.style.display = 'block';</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>// Panggil fungsi saat halaman dimuat</p>
<p class="p1"><span class="Apple-converted-space">        </span>document.addEventListener('DOMContentLoaded', fetchJobDropdownData);</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>// Event listener untuk validasi input Job</p>
<p class="p1"><span class="Apple-converted-space">        </span>jobListDropdown.addEventListener('change', function() {</p>
<p class="p1"><span class="Apple-converted-space">            </span>if (this.value !== '') {</p>
<p class="p1"><span class="Apple-converted-space">                </span>newJobNameInput.value = '';</p>
<p class="p1"><span class="Apple-converted-space">                </span>newJobNameInput.disabled = true;</p>
<p class="p1"><span class="Apple-converted-space">            </span>} else {</p>
<p class="p1"><span class="Apple-converted-space">                </span>newJobNameInput.disabled = false;</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>});</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>newJobNameInput.addEventListener('input', function() {</p>
<p class="p1"><span class="Apple-converted-space">            </span>if (this.value !== '') {</p>
<p class="p1"><span class="Apple-converted-space">                </span>jobListDropdown.value = '';</p>
<p class="p1"><span class="Apple-converted-space">                </span>jobListDropdown.disabled = true;</p>
<p class="p1"><span class="Apple-converted-space">            </span>} else {</p>
<p class="p1"><span class="Apple-converted-space">                </span>jobListDropdown.disabled = false;</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>});</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>// Event listener untuk submit formulir</p>
<p class="p1"><span class="Apple-converted-space">        </span>jobForm.addEventListener('submit', async function(event) {</p>
<p class="p1"><span class="Apple-converted-space">            </span>event.preventDefault();</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>const selectedJob = jobListDropdown.value;</p>
<p class="p1"><span class="Apple-converted-space">            </span>const newJob = newJobNameInput.value.trim();</p>
<p class="p1"><span class="Apple-converted-space">            </span>const notes = document.getElementById('notes').value.trim();</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>// Validasi: Harus pilih job ATAU isi job baru</p>
<p class="p1"><span class="Apple-converted-space">            </span>if (!selectedJob &amp;&amp; !newJob) {</p>
<p class="p1"><span class="Apple-converted-space">                </span>alert('Anda harus memilih job dari daftar ATAU memasukkan nama job baru.');</p>
<p class="p1"><span class="Apple-converted-space">                </span>return;</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>const formData = {</p>
<p class="p1"><span class="Apple-converted-space">                </span>selectedJob: selectedJob,</p>
<p class="p1"><span class="Apple-converted-space">                </span>newJob: newJob,</p>
<p class="p1"><span class="Apple-converted-space">                </span>notes: notes,</p>
<p class="p1"><span class="Apple-converted-space">            </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>try {</p>
<p class="p1"><span class="Apple-converted-space">                </span>const response = await fetch(N8N_SUBMIT_WEBHOOK_URL, {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>method: 'POST',</p>
<p class="p1"><span class="Apple-converted-space">                    </span>headers: {</p>
<p class="p1"><span class="Apple-converted-space">                        </span>'Content-Type': 'application/json',</p>
<p class="p1"><span class="Apple-converted-space">                    </span>},</p>
<p class="p1"><span class="Apple-converted-space">                    </span>body: JSON.stringify(formData),</p>
<p class="p1"><span class="Apple-converted-space">                </span>});</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                </span>if (response.ok) {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>jobForm.reset();</p>
<p class="p1"><span class="Apple-converted-space">                    </span>jobListDropdown.disabled = false;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>newJobNameInput.disabled = false;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>successMessage.style.display = 'block';</p>
<p class="p1"><span class="Apple-converted-space">                    </span>errorMessage.style.display = 'none';</p>
<p class="p1"><span class="Apple-converted-space">                    </span>setTimeout(() =&gt; successMessage.style.display = 'none', 3000);</p>
<p class="p1"><span class="Apple-converted-space">                    </span>await fetchJobDropdownData(); // Muat ulang dropdown job jika ada penambahan data baru</p>
<p class="p1"><span class="Apple-converted-space">                </span>} else {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>errorMessage.textContent = 'Gagal mengirim data. Silakan coba lagi.';</p>
<p class="p1"><span class="Apple-converted-space">                    </span>errorMessage.style.display = 'block';</p>
<p class="p1"><span class="Apple-converted-space">                    </span>successMessage.style.display = 'none';</p>
<p class="p1"><span class="Apple-converted-space">                </span>}</p>
<p class="p1"><span class="Apple-converted-space">            </span>} catch (error) {</p>
<p class="p1"><span class="Apple-converted-space">                </span>console.error('Terjadi kesalahan:', error);</p>
<p class="p1"><span class="Apple-converted-space">                </span>errorMessage.textContent = 'Terjadi kesalahan jaringan atau server. Silakan coba lagi.';</p>
<p class="p1"><span class="Apple-converted-space">                </span>errorMessage.style.display = 'block';</p>
<p class="p1"><span class="Apple-converted-space">                </span>successMessage.style.display = 'none';</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>});</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;/script&gt;</p>
<p class="p1">&lt;/body&gt;</p>
<p class="p1">&lt;/html&gt;</p>
</body>
</html>
